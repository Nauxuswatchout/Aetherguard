{% block additional_styles %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/storybook.css') }}"
/>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
/>
{% endblock %} {% block content %}
<div class="storybook-container full-page">
  <!-- Audio Element (hidden) -->
  <audio id="story-audio" preload="none">
    <source
      src="{{ url_for('static', filename='audio/stories/Tilly_story.mp3') }}"
      type="audio/mpeg"
    />
    Your browser does not support the audio element.
  </audio>

  <!-- Audio Controls -->
  <div class="audio-controls">
    <div class="audio-main-controls">
      <button
        id="audio-play-pause"
        class="audio-btn"
        title="Play/Pause current page audio"
      >
        <i class="fas fa-play"></i>
      </button>
      <div class="volume-control">
        <button id="audio-mute" class="audio-btn" title="Mute/Unmute">
          <i class="fas fa-volume-up"></i>
        </button>
        <input
          type="range"
          id="volume-slider"
          class="volume-slider"
          min="0"
          max="100"
          value="70"
          title="Volume"
        />
      </div>
    </div>
    <div class="autoplay-control">
      <span class="autoplay-label">Auto-play:</span>
      <label class="toggle-switch">
        <input type="checkbox" id="auto-play-toggle" checked />
        <span class="toggle-slider"></span>
      </label>
    </div>
    <div class="audio-instructions">
      <strong>Controls:</strong>
      <br />• ▶/⏸️ - Play/pause <br />• 🔊 - Mute/unmute <br />• Auto-play audio
      on page turn <br />• Use Arrow keys or buttons to turn pages
    </div>
  </div>

  <!-- Navigation Controls -->
  <div class="book-controls">
    <div class="flip-btn-container">
      <button id="prev-btn" class="flip-btn">Prev Page</button>
      <button id="next-btn" class="flip-btn">Next Page</button>
    </div>
    <div class="back-to-section">
      <a href="{{ url_for('tilly_page') }}" class="back-button">
        <span class="back-arrow">←</span> Back to Library
      </a>
    </div>
  </div>

  <div class="book-wrapper">
    <div id="book" class="book">
      <!-- Book Cover -->
      <div class="page">
        <div class="page-content">
          <div class="text-section">
            <h2 class="page-header">Tilly the Turtle and the Secret App</h2>
          </div>
        </div>
      </div>

      <!-- Page 1 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>By the sea, Tilly the Turtle lived with Grandma Turtle.</p>
          </div>
          <div class="page-number">1</div>
        </div>
      </div>

      <!-- Page 2 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>One morning, Grandma said, “You can use my tablet, sweetie.”</p>
          </div>
          <div class="page-number">2</div>
        </div>
      </div>

      <!-- Page 3 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>Tilly opened a fun puzzle game and started playing happily.</p>
          </div>
          <div class="page-number">3</div>
        </div>
      </div>

      <!-- Page 4 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>A pop-up appeared: “Download ‘Magic Shells’ for more fun!”</p>
          </div>
          <div class="page-number">4</div>
        </div>
      </div>

      <!-- Page 5 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>“Ooooh!” Tilly said, “I want sparkly shells!”</p>
          </div>
          <div class="page-number">5</div>
        </div>
      </div>

      <!-- Page 6 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>
              He clicked. Another screen said: “Allow full access to device?”
            </p>
          </div>
          <div class="page-number">6</div>
        </div>
      </div>

      <!-- Page 7 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>Tilly paused. “What does that mean?” he wondered.</p>
          </div>
          <div class="page-number">7</div>
        </div>
      </div>

      <!-- Page 8 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>He clicked “Yes.” Suddenly, the screen turned all black.</p>
          </div>
          <div class="page-number">8</div>
        </div>
      </div>

      <!-- Page 9 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>The tablet beeped. A loud voice shouted: “Got you!”</p>
          </div>
          <div class="page-number">9</div>
        </div>
      </div>

      <!-- Page 10 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>Tilly screamed. Grandma rushed over. “What happened, dear?”</p>
          </div>
          <div class="page-number">10</div>
        </div>
      </div>

      <!-- Page 11 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>
              “The app stole everything!” Tilly cried. “Even your pictures!”
            </p>
          </div>
          <div class="page-number">11</div>
        </div>
      </div>

      <!-- Page 12 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>Grandma sighed, “That’s a fake app. It’s dangerous.”</p>
          </div>
          <div class="page-number">12</div>
        </div>
      </div>

      <!-- Page 13 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>They deleted the app and called Turtle Tech Helpers.</p>
          </div>
          <div class="page-number">13</div>
        </div>
      </div>

      <!-- Page 14 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>Now Tilly knows: “Never click unknown apps or buttons!”</p>
          </div>
          <div class="page-number">14</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/3/turn.min.js"></script>
<script src="{{ url_for('static', filename='js/stories/tilly.js') }}"></script>
{% endblock %}
