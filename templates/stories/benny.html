{% block additional_styles %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/storybook.css') }}"
/>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
/>
{% endblock %} {% block content %}
<div class="storybook-container full-page">
  <!-- Audio Element (hidden) -->
  <audio id="story-audio" preload="none">
    <source
      src="{{ url_for('static', filename='audio/stories/Benny_story.mp3') }}"
      type="audio/mpeg"
    />
    Your browser does not support the audio element.
  </audio>

  <!-- Audio Controls -->
  <div class="audio-controls">
    <div class="audio-main-controls">
      <button
        id="audio-play-pause"
        class="audio-btn"
        title="Play/Pause current page audio"
      >
        <i class="fas fa-play"></i>
      </button>
      <div class="volume-control">
        <button id="audio-mute" class="audio-btn" title="Mute/Unmute">
          <i class="fas fa-volume-up"></i>
        </button>
        <input
          type="range"
          id="volume-slider"
          class="volume-slider"
          min="0"
          max="100"
          value="70"
          title="Volume"
        />
      </div>
    </div>
    <div class="autoplay-control">
      <span class="autoplay-label">Auto-play:</span>
      <label class="toggle-switch">
        <input type="checkbox" id="auto-play-toggle" checked />
        <span class="toggle-slider"></span>
      </label>
    </div>
    <div class="audio-instructions">
      <strong>Controls:</strong>
      <br />‚Ä¢ ‚ñ∂/‚è∏Ô∏è - Play/pause <br />‚Ä¢ üîä - Mute/unmute <br />‚Ä¢ Auto-play audio
      on page turn <br />‚Ä¢ Use Arrow keys or buttons to turn pages
    </div>
  </div>

  <!-- Navigation Controls -->
  <div class="book-controls">
    <div class="flip-btn-container">
      <button id="prev-btn" class="flip-btn">Prev Page</button>
      <button id="next-btn" class="flip-btn">Next Page</button>
    </div>
    <div class="back-to-section">
      <a href="{{ url_for('tilly_page') }}" class="back-button">
        <span class="back-arrow">‚Üê</span> Back to Library
      </a>
    </div>
  </div>

  <div class="book-wrapper">
    <div id="book" class="book">
      <!-- Book Cover -->
      <div class="page">
        <div class="page-content">
          <div class="text-section">
            <h2 class="page-header">Benny the Bear and the Photo Request</h2>
          </div>
        </div>
      </div>

      <!-- Page 1 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>Benny the Bear lived near Honey Creek with his family.</p>
          </div>
          <div class="page-number">1</div>
        </div>
      </div>

      <!-- Page 2 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>One rainy day, Benny joined a new animal chat room.</p>
          </div>
          <div class="page-number">2</div>
        </div>
      </div>

      <!-- Page 3 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>A user named "SunnySmile" messaged, "You're cute!"</p>
          </div>
          <div class="page-number">3</div>
        </div>
      </div>

      <!-- Page 4 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>Then: "Can you send me a photo of you?"</p>
          </div>
          <div class="page-number">4</div>
        </div>
      </div>

      <!-- Page 5 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>Benny blushed. "Just one selfie won't hurt..."</p>
          </div>
          <div class="page-number">5</div>
        </div>
      </div>

      <!-- Page 6 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>Before he clicked, he heard Mama Bear calling,</p>
          </div>
          <div class="page-number">6</div>
        </div>
      </div>

      <!-- Page 7 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>"Who are you talking to?" she asked gently.</p>
          </div>
          <div class="page-number">7</div>
        </div>
      </div>

      <!-- Page 8 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>He showed her the message. Her face turned serious.</p>
          </div>
          <div class="page-number">8</div>
        </div>
      </div>

      <!-- Page 9 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>"Never send photos to strangers," she warned.</p>
          </div>
          <div class="page-number">9</div>
        </div>
      </div>

      <!-- Page 10 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>"They can save it, share it, or use it badly."</p>
          </div>
          <div class="page-number">10</div>
        </div>
      </div>

      <!-- Page 11 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>Benny gasped. "Even if they say nice things?"</p>
          </div>
          <div class="page-number">11</div>
        </div>
      </div>

      <!-- Page 12 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>"Yes," Mama said, "Real friends don't ask for pictures."</p>
          </div>
          <div class="page-number">12</div>
        </div>
      </div>

      <!-- Page 13 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>They blocked SunnySmile and left the chat room.</p>
          </div>
          <div class="page-number">13</div>
        </div>
      </div>

      <!-- Page 14 -->
      <div class="page">
        <div class="page-content top-half">
          <div class="text-section">
            <p>Now Benny says: "My photo is mine. I don't share it."</p>
          </div>
          <div class="page-number">14</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/3/turn.min.js"></script>
<script src="{{ url_for('static', filename='js/stories/benny.js') }}"></script>
<script>
// Add page turning sounds
const pageSounds = [
    new Audio("{{ url_for('static', filename='sounds/page1.mp3') }}"),
    new Audio("{{ url_for('static', filename='sounds/page2.mp3') }}"),
    new Audio("{{ url_for('static', filename='sounds/page3.mp3') }}")
];

function playRandomPageSound() {
    const randomIndex = Math.floor(Math.random() * pageSounds.length);
    pageSounds[randomIndex].currentTime = 0;
    pageSounds[randomIndex].play();
}

// Add page turning sound effect
$("#book").bind('turning', function(e, page, view) {
    playRandomPageSound();
});
</script>
{% endblock %}
